
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
<title>documentation</title>
</head>
<body>
<center>
<img src="../04_documentation/docs/generic_bank_logo.png" alt="generic_bank_logo" width="100" crossorigin="anonymous">
<h1>"Bank Name"</h1>
<h2>MODEL VALIDATION <br> MODEL RISK MANAGEMENT
<p>Annual Validation Report</p>
<p>CRE loan balances - Probability of Default Model<br>
(Model ID 894 Version 3.2)</p>
</h2>
</center>
<center>
<table cellpadding="5">
<tr>
<td>
Prepared by: 
</td>
<td>
<p>First Name, Last Name</p>
<p>Title, Model Validation (MV)</p>
</td>
<tr>
<td>
Reviewed by:
</td>
<td>
<p>First Name, Last Name</p>
<p>Title, Model Validation (MV)</p>
</td>
</tr>
</table>
</center>
<h3>Identification</h3>
<table cellpadding="5" border="1">
<tr bgcolor=green>
<td>
ID
</td>
<td>
Model Version Number
</td>
<td>
Model
</td>
<td>
File Name
</td>
</tr>
<td>
894
</td>
<td>
3.2
</td>
<td>
CRE loan balances - Probability of Default model
</td>
<td>
Annual Validation
</td>
</tr>
</table>
<hr>
<div id="toc_container">
<h2><p class="toc_title">Table of Contents</p></h2>
<ul class="toc_list">
<li><a>1 EXECUTIVE SUMMARY</a></li>
<li><a>2 INTRODUCTION</a>
<ul>
<li><a>2.1 Model source</a></li>
<li><a>2.2 Model composition</a></li>
<li><a>2.3 Model version</a></li>
<li><a>2.4 Model usage and product definition</a></li>
<li><a>2.5 Validation coverage</a></li>
</ul>
</li>
<li><a>3 MODEL DESCRIPTION</a>
<ul>
<li><a>3.1 Model overview</a></li>
<li><a>3.2 Theoretical background</a></li>
<li><a>3.3 Significant assumptions and limitations</a></li>
<li><a>3.4 Model input</a></li>
<li><a>3.5 Model output</a></li>
</ul>
</li>
<li><a>4 MV METHODOLOGY ASSESSMENT</a>
<ul>
<li><a>4.1 Literature review</a></li>
<li><a>4.2 Conceptual soundness</a></li>
<ul>
<li><a>4.2.1 Model Framework and Calculation Method</a></li>
<li><a>4.2.2 Alternate Methodologies</a></li>
<li><a>4.2.3 Model Segmentation</a></li>
<li><a>4.2.4 Model Driver/Variable Selection</a></li>
<li><a>4.2.5 COVID-19 impact assessment</a></li>
<li><a>4.2.6 Review of any outstanding regulatory or IA findings, if applicable</a></li>
</ul>
<li><a>4.3 Assesment of input data</a></li>
<li><a>4.4 Bias and fairness</a></li>
<li><a>4.5 Assesment of significant assumptions and limitations</a></li>
<li><a>4.6 Assesment of source of uncertainty and margin of conservatism</a></li>
<li><a>4.7 Assesment of the documentation</a></li>
<li><a>4.8 Assesment of performance monitoring approach</a></li>
<li><a>4.9 Vendor model contingency plan (if applicable, otherwise delete)</a></li>
</ul>
</li>
<li><a>5 MODEL PERFORMANCE ASSESSMENT</a>
<ul>
<li><a>5.1 PD model replication</a></li>
<ul>
<li><a>5.1.1 Data quality</a></li>
<li><a>5.1.2 Univariate analysis</a></li>
<li><a>5.1.3 Model coefficient comparison</a></li>
</ul>
<li><a>5.2 PD model stress test</a></li>
<ul> 
<li><a>5.2.1 Kolmogorovâ€“Smirnov test</a></li>
<li><a>5.2.2 Variance Inflation Factor</a></li>
<li><a>5.2.3 Receiver Operating Characteristic curve</a></li>
<li><a>5.2.4 Normal test</a></li>
</ul>
<li><a>5.3 Conclusions and recommendations</a></li>
<li><a>5.4 Model limitations</a></li>
<li><a>5.5 Model risk assessment</a></li>
</ul>
</li>
<li><a>6 REFERENCES</a>
<li><a>7 APPENDIX</a>
<ul>
<li><a>7.1 Final MDR</a></li>
<li><a>7.2 Other MV materials</a></li>
</ul>
<li><a>8 ASSESSMENT OF REGULATORY REQUIREMENTS</a>
<li><a>9 ISSUE LOG</a>
</ul>
</div>
<hr>
<h2>5. Model Performance Assessment</h2>
<p>MV performed an annual validation of the CRE loan balances PD model. The model is developed using logistic regression technique with 7 independent variables. Data was sourced from TREPP and was split into training and testing data by random sampling approach. The development of the model was in Python, however the validation is performed in R.</p>
<p>In the current validation exercise, MV has performed the following activities for the selective varibles:<br>
1.) Replication of the PD model - univariate analysis of risk drivers, comparison of independently replicated model coefficients with values as provided by development team<br>
2.) Validation testing of the PD model - KS test, ROC curve, VIF and Normal test have been performed by the MV</p>
<p>The definations of the selected variables are listed below:</p>
<li><a>priorfydscr:Preceding Fiscal Year DSCR (NOI). A ratio of net operating income (NOI) to debt service for the most recent fiscal year end statement available as reported by the servicer.</a></li>
<li><a>mrfytdocc: Most Recent Occupancy Rate. The most recent available percentage of rentable space occupied. Should be derived from a rent roll or other document indicating occupancy consistent with most recent documentation.</a></li>
<li><a>debt_yield_p1: Debt yield of preceding financial year.</a></li>
<li><a>priorfyocc:Preceding Fiscal Year Occupancy Rate. A percentage of rentable space occupied as of the most recent fiscal year end operating statement available. Should be derived from a rent roll or other document indicating occupancy, and in most cases should be within 45 days of the most recent fiscal year end financial statement.</a></li>
<li><a>OLTV:LTV at the time of origination.</a></li>
<li><a>Division: Division created from the states of US.</a></li>
<li><a>interestonly:Interest Only (Y/P/N). If loan is interest only for life, then Y; if loan has more than one interest only period but is not fully interest only then P; else N.</a></li>
<p>The details of the above are provided in the sections below.</p>
<hr>
<h2>5.1 PD model replication</h2>
<h2>5.1.1 Data quality</h2>
In data quality analysis, we focussed on assessing whether the data used in input of the model (e.g., data from systems and databases) are reliable. Following tests are performed:
1) Missing values
2) Descriptive statistics
<p><b>Missing values</b></p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Missing</th>
</tr>
</thead>
<tbody>
<tr>
<td>mrfytdocc</td>
<td>42.87%</td>
</tr>
<tr>
<td>priorfyocc</td>
<td>25.28%</td>
</tr>
<tr>
<td>priorfydscr</td>
<td>21.82%</td>
</tr>
<tr>
<td>debt_yield_p1</td>
<td>17.51%</td>
</tr>
<tr>
<td>OLTV</td>
<td>3.4%</td>
</tr>
</tbody>
</table>
<p><b>Descriptive statistics</b></p>
<table>
<thead>
<tr>
<th>Metrics</th>
<th>Priorfydscr</th>
<th>Mrfytdocc</th>
<th>Debt yield p1</th>
<th>Priorfyocc</th>
<th>Oltv</th>
<th>Division</th>
<th>Interestonly</th>
<th>Bad flag final v3</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>72687</td>
<td>53116</td>
<td>76691</td>
<td>69471</td>
<td>89812</td>
<td>92974</td>
<td>92974</td>
<td>92974</td>
</tr>
<tr>
<td>unique</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>10</td>
<td>3</td>
<td>N/A</td>
</tr>
<tr>
<td>top</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>South-Atlantic</td>
<td>N</td>
<td>N/A</td>
</tr>
<tr>
<td>freq</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
<td>19311</td>
<td>85294</td>
<td>N/A</td>
</tr>
<tr>
<td>mean</td>
<td>1.8395755298</td>
<td>93.4809228426</td>
<td>12.5337343705</td>
<td>93.754880108</td>
<td>66.4377253596</td>
<td>N/A</td>
<td>N/A</td>
<td>0.011960333</td>
</tr>
<tr>
<td>std</td>
<td>1.8170684715</td>
<td>9.0892893303</td>
<td>13.8366159547</td>
<td>9.2084476055</td>
<td>17.2802191395</td>
<td>N/A</td>
<td>N/A</td>
<td>0.1087079139</td>
</tr>
<tr>
<td>min</td>
<td>-2.8302</td>
<td>0.78</td>
<td>-26.38654378</td>
<td>1</td>
<td>0.9</td>
<td>N/A</td>
<td>N/A</td>
<td>0</td>
</tr>
<tr>
<td>25%</td>
<td>1.2978</td>
<td>91.9175</td>
<td>6.8698379192</td>
<td>92</td>
<td>62.8</td>
<td>N/A</td>
<td>N/A</td>
<td>0</td>
</tr>
<tr>
<td>50%</td>
<td>1.53</td>
<td>95.1</td>
<td>10.461944328</td>
<td>96</td>
<td>72.59</td>
<td>N/A</td>
<td>N/A</td>
<td>0</td>
</tr>
<tr>
<td>75%</td>
<td>1.86</td>
<td>100</td>
<td>14.0404936145</td>
<td>100</td>
<td>77.6</td>
<td>N/A</td>
<td>N/A</td>
<td>0</td>
</tr>
<tr>
<td>max</td>
<td>63.97</td>
<td>100</td>
<td>408.3590591</td>
<td>100</td>
<td>96.24</td>
<td>N/A</td>
<td>N/A</td>
<td>1</td>
</tr>
</tbody>
</table>
<h2>5.1.2 Univariate analysis</h2>
In a univariate analysis, we set up a multitude of logistic regression models where there is only one explanatory variable (the risk driver) and the response variable (the default). Among those models, the ones that describes best the response variable can indicate the most significant explanatory variables, which can then be used to perform a multivariate analysis.
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Coef</th>
<th>P z</th>
<th>Gini coefficient</th>
</tr>
</thead>
<tbody>
<tr>
<td>priorfydscr</td>
<td>-0.881726911</td>
<td>0</td>
<td>0.452</td>
</tr>
<tr>
<td>mrfytdocc</td>
<td>-1.2194863213</td>
<td>0</td>
<td>0.321</td>
</tr>
<tr>
<td>debt_yield_p1</td>
<td>-0.8919738737</td>
<td>0</td>
<td>0.281</td>
</tr>
<tr>
<td>priorfyocc</td>
<td>-1.1645963421</td>
<td>0</td>
<td>0.383</td>
</tr>
<tr>
<td>OLTV</td>
<td>-0.7754851517</td>
<td>0</td>
<td>0.217</td>
</tr>
<tr>
<td>Division</td>
<td>-0.8479998614</td>
<td>0</td>
<td>0.238</td>
</tr>
<tr>
<td>interestonly</td>
<td>-0.9347473414</td>
<td>8.31589183e-158</td>
<td>0.057</td>
</tr>
</tbody>
</table>
<p>The model coefficients, p-values and Gini coefficients of each of the chosen explanatory variables indicate that these parameters explain the reponse variable quite well.</p>
<hr>
<h2>5.1.3 Model coefficient comparison</h2>
The PD model is independently replicated by the validation team to ensure correctness of the implementation.
In order to assess whether the replicated PD model yields the same output as the original model, the risk drivers (independent parameters) and their model coefficients are compared.
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Coef development</th>
<th>Coef validation</th>
<th>Coef diff</th>
</tr>
</thead>
<tbody>
<tr>
<td>const</td>
<td>-4.4168461324</td>
<td>-4.4168461324</td>
<td>0</td>
</tr>
<tr>
<td>priorfydscr</td>
<td>-0.7618294827</td>
<td>-0.7618294827</td>
<td>-2.220446049e-16</td>
</tr>
<tr>
<td>mrfytdocc</td>
<td>-0.3871917877</td>
<td>-0.3871917877</td>
<td>-9.992007222e-16</td>
</tr>
<tr>
<td>debt_yield_p1</td>
<td>-0.1510340457</td>
<td>-0.1510340457</td>
<td>0</td>
</tr>
<tr>
<td>priorfyocc</td>
<td>-0.4915827429</td>
<td>-0.4915827429</td>
<td>-5.551115123e-17</td>
</tr>
<tr>
<td>OLTV</td>
<td>-0.310497772</td>
<td>-0.310497772</td>
<td>-8.881784197e-16</td>
</tr>
<tr>
<td>Division</td>
<td>-0.5789169907</td>
<td>-0.5789169907</td>
<td>0</td>
</tr>
<tr>
<td>interestonly</td>
<td>-0.3459055608</td>
<td>-0.3459055608</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>The differences between the results of the independent model replication and the results of the development team, both for the model coefficients and their standard deviation, indicate the correctness of the implementation of the PD model. In case these differences are not equal to zero, further investigation is needed into why this would be the case (e.g., implementation issues, specifications of the underlying data set, parameterization of the PD model, etc).</p>
<hr>
<h2>5.1.3.2 Scoring</h2>
Based on the forecasted probability of default, each facility is assiged to a rating.
Below the distribution of the ratings for the train and test dataset.
<p>Train dataset distribution</p>
<center>
<p><img src="../5_1_4_score/output/03_ROC_curve/docs/train_hist_all_count.png"></p>
</center>
<center>
<p><img src="../5_1_4_score/output/03_ROC_curve/docs/train_hist_all_percentage.png"></p>
</center>
<center>
<p><img src="../5_1_4_score/output/03_ROC_curve/docs/train_region_count.png"></p>
</center>
<center>
<p><img src="../5_1_4_score/output/03_ROC_curve/docs/train_region_percentage.png"></p>
</center>
<p>Test dataset distribution</p>
<center>
<p><img src="../5_1_4_score/output/03_ROC_curve/docs/test_hist_all_count.png"></p>
</center>
<center>
<p><img src="../5_1_4_score/output/03_ROC_curve/docs/test_hist_all_percentage.png"></p>
</center>
<center>
<p><img src="../5_1_4_score/output/03_ROC_curve/docs/test_region_count.png"></p>
</center>
<center>
<p><img src="../5_1_4_score/output/03_ROC_curve/docs/test_region_percentage.png"></p>
</center>
<hr>
<h2>5.2 PD model stress test</h2>
<h2>5.2.1 Kolmogorovâ€“Smirnov Test</h2>
The KS statistic is used to measure the discriminatory power of the PD model. It is defined as the maximum difference between the cumulative percentage of good samples (i.e., non-defaulters) and the cumulative percentage of bad samples (i.e., defaulters). A higher KS value implies a good fit of the model.
<p>The test returns a KS value.</p>
<table>
<thead>
<tr>
<th>Ks statistic train</th>
<th>Ks statistic test</th>
</tr>
</thead>
<tbody>
<tr>
<td>0.4219</td>
<td>0.3811</td>
</tr>
</tbody>
</table>
<p>For training sample, the KS value is 0.4219, which is higher than the threshold of 0.4, indicating that discriminatory power of the model is good. For testing sample, the KS value is 0.3811, which is lower than the threshold of 0.4, indicating that discriminatory power of the model is not sufficient.</p>
<hr>
<h2>5.2.2 Variance Inflation Factor</h2>
This test is to assess the multicollinearity among the risk drivers. The variance inflation factor (VIF) quantifies the severity of multicollinearity in an regression analysis caused by correlation between multiple â€˜independent variablesâ€™ in a  model (i.e., the risk drivers). It is a measure of how much the variance of an estimated regression coefficient is inflated because of multicollinearity in the model. High levels of multicollinearity results in unstable parameter estimates and renders the model statistically invalid.
<p>The test returns VIF value for each variable listed in the table below.</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Vif</th>
</tr>
</thead>
<tbody>
<tr>
<td>priorfydscr_transformed</td>
<td>1.3352</td>
</tr>
<tr>
<td>mrfytdocc_transformed</td>
<td>1.6708</td>
</tr>
<tr>
<td>debt_yield_p1_transformed</td>
<td>1.364</td>
</tr>
<tr>
<td>priorfyocc_transformed</td>
<td>1.6813</td>
</tr>
<tr>
<td>OLTV_transformed</td>
<td>1.2259</td>
</tr>
<tr>
<td>Division_transformed</td>
<td>1.0953</td>
</tr>
<tr>
<td>interestonly_transformed</td>
<td>1.045</td>
</tr>
</tbody>
</table>
<p>As shown in the above table, all variables have a VIF lower than 4, indicating the model does not suffer from multicollinearity.</p>
<hr>
<h2>5.2.3 Receiver Operating Characteristic curve</h2>
Receiver Operating Characteristic (ROC) is a curve in a unit square which is used to assess the accuracy of the diagnostic (e.g. rating) system. The area under curve (AUC) is the area under the ROC curve. Higher AUC means higher discriminatory power of model.
<table>
<thead>
<tr>
<th>Area under curve</th>
<th>Gini coefficient</th>
</tr>
</thead>
<tbody>
<tr>
<td>0.7743</td>
<td>0.5487</td>
</tr>
</tbody>
</table>
<p>As shown in the above table, the AUC value is higher than 0.7 and the Gini value of the model is higher than 0.4, indicating that discriminatory power of the model is good.</p>
<hr>
<h2>5.2.4 Normal Test</h2>
The aim of the test is to evaluate the adequacy of observed default rates comparing to predicted PD. The test is performed on the level of rating grade. It is applied under the assumption that the mean default rate does not vary too much over time and that default events in different years are independent. The normal test is motivated by the Central Limit Theorem and is based on a normal approximation of the distribution of the time-averaged default rates.
With high enough (>30) number (n) of observations which are independent, Point in Time (PIT) observed default rate (ODR) is expected to be normally distributed. The algorithm of the test is to calculate time-weighted (or simple arithmetic) average of all PiT ODRs, calculate standard error of this statistic and derive confidence interval for it. 
<p>The test returns a table of p values and a brief interpretation of the test result for each rating grade.</p>
<table>
<thead>
<tr>
<th>Rating class</th>
<th>Predicted pd upper boundary</th>
<th>Default rate</th>
<th>Normal test p value</th>
<th>Normal test result</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0.1%</td>
<td>0.13%</td>
<td>0.1063</td>
<td>Acceptable</td>
</tr>
<tr>
<td>2</td>
<td>0.26%</td>
<td>0.22%</td>
<td>0.1439</td>
<td>Acceptable</td>
</tr>
<tr>
<td>3</td>
<td>0.42%</td>
<td>0.42%</td>
<td>0.1088</td>
<td>Acceptable</td>
</tr>
<tr>
<td>4</td>
<td>0.56%</td>
<td>0.53%</td>
<td>0.1982</td>
<td>Acceptable</td>
</tr>
<tr>
<td>5</td>
<td>0.71%</td>
<td>0.7%</td>
<td>0.2359</td>
<td>Acceptable</td>
</tr>
<tr>
<td>6</td>
<td>0.93%</td>
<td>0.91%</td>
<td>0.2364</td>
<td>Acceptable</td>
</tr>
<tr>
<td>7</td>
<td>1.12%</td>
<td>0.7%</td>
<td>0.2665</td>
<td>Acceptable</td>
</tr>
<tr>
<td>8</td>
<td>1.41%</td>
<td>1.1%</td>
<td>0.4014</td>
<td>Acceptable</td>
</tr>
<tr>
<td>9</td>
<td>2.56%</td>
<td>1.91%</td>
<td>0.4329</td>
<td>Acceptable</td>
</tr>
<tr>
<td>10</td>
<td>15%</td>
<td>5.37%</td>
<td>0.0627</td>
<td>Acceptable</td>
</tr>
</tbody>
</table>
<p>As shown in the above table, the p-value of Normal test for all segments is higher than 0.05, which means the null hypothesis cannot be rejected and there is evidence that the predicted PD does not deviate from the long run average of observed values. Therefore, the accuracy of the model is adequate.</p>
<hr>
</body>
</html>
